---
import Base from "@/layouts/Base.astro";
import { getSinglePage } from "@/lib/contentParser.astro";
import { sortByDate } from "@/lib/utils/sortFunctions";
import dateFormat from "@/lib/utils/dateFormat";
import { humanize, slugify } from "@/lib/utils/textConverter";

const posts = await getSinglePage("posts");
const sortedPosts = sortByDate(posts).slice(0, 5);
---

<Base>
  <section class="pt-32 pb-20 md:pt-48 md:pb-32 px-6 border-b border-gray-200 bg-white">
      <div class="max-w-4xl mx-auto text-center">
          <span class="text-primary font-bold tracking-[0.2em] text-xs uppercase mb-6 block">Refúgio Literário de Dan Coelho</span>
          <h1 class="font-primary text-5xl md:text-7xl font-bold text-dark leading-[1.1] mb-8">
              Clareza para mentes exaustas. <br class="hidden md:block"/> <span class="text-primary italic font-medium">Graça para líderes reais.</span>
          </h1>
          <p class="text-gray-600 text-lg md:text-2xl font-light mb-12 max-w-2xl mx-auto leading-relaxed">
              Onde a precisão da gestão de alta performance encontra a profunda neuroplasticidade da fé.
          </p>
          
          <form class="flex flex-col sm:flex-row justify-center max-w-lg mx-auto gap-3">
              <input type="email" placeholder="Seu melhor e-mail..." class="w-full px-6 py-4 bg-gray-50 border border-gray-200 rounded-lg text-dark placeholder-gray-400 focus:border-primary focus:ring-1 focus:ring-[#b8905b] outline-none transition-all" required/>
              <button type="submit" class="w-full sm:w-auto bg-dark hover:bg-gray-800 text-white px-8 py-4 rounded-lg font-semibold transition-all shadow-md whitespace-nowrap">
                  Ler aos Domingos
              </button>
          </form>
          <p class="text-xs text-gray-400 mt-4">100% gratuito. Cancele quando quiser.</p>
      </div>
  </section>

  <section id="ensaios" class="py-20 md:py-32 px-6 bg-body">
      <div class="max-w-4xl mx-auto">
          <div class="flex justify-between items-end mb-16 border-b-2 border-dark pb-4">
              <h2 class="font-primary text-3xl md:text-4xl font-bold text-dark">Ensaios Recentes</h2>
          </div>

          <div class="space-y-12 md:space-y-16">
              {sortedPosts.map((post) => (
                  <article class="group border-b border-gray-100 pb-12 last:border-0 last:pb-0">
                      <div class="flex items-center space-x-4 mb-4">
                          <time class="text-gray-400 text-sm font-medium tracking-wide">{dateFormat(post.data.date)}</time>
                          <span class="text-gray-300">|</span>
                          {post.data.categories && (
                              <a href={`/categorias/${slugify(post.data.categories[0])}`} class="text-primary text-sm font-bold uppercase tracking-widest hover:text-dark transition">
                                  {humanize(post.data.categories[0])}
                              </a>
                          )}
                      </div>
                      <a href={`/blog/${post.id}`} class="block">
                          <h3 class="font-primary text-3xl md:text-4xl font-bold text-dark group-hover:text-primary transition-colors mb-4 leading-tight">
                              {post.data.title}
                          </h3>
                          <p class="text-gray-600 text-lg leading-relaxed md:max-w-3xl line-clamp-3">
                              {post.data.description}
                          </p>
                      </a>
                  </article>
              ))}
          </div>
          
          <div class="mt-20 text-center">
              <a href="/arquivo" class="inline-block bg-white border border-gray-200 text-dark px-10 py-4 rounded-lg hover:bg-dark hover:text-white hover:border-dark font-bold text-sm tracking-widest uppercase transition-all duration-300 shadow-sm">
                  Explorar o Arquivo Completo
              </a>
          </div>
      </div>
  </section>

  <section id="livros" class="py-24 md:py-40 px-6 bg-white border-t border-gray-100">
      <div class="max-w-6xl mx-auto">
          
          <div class="flex flex-col md:flex-row justify-between items-end mb-20 md:mb-32 gap-8">
              <div class="max-w-2xl">
                  <span class="text-primary font-bold tracking-[0.2em] text-xs uppercase mb-6 block">A Biblioteca Literária</span>
                  <h2 class="font-primary text-4xl md:text-6xl lg:text-7xl font-bold text-dark mb-6 leading-[1.1]">Manuais de Vida<br/>e Liderança.</h2>
              </div>
              <div class="max-w-md md:text-right pb-4">
                  <p class="text-gray-500 text-lg leading-relaxed">O conhecimento não deve ter barreiras. Baixe as obras de graça ou contribua com o valor que elas gerarem na sua jornada.</p>
              </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-16 md:gap-24">
              
              <div class="group relative">
                  <div class="w-full bg-body rounded-3xl aspect-[4/3] md:aspect-[4/5] flex items-center justify-center p-8 md:p-12 mb-10 border border-gray-100 relative overflow-hidden transition-all duration-700 group-hover:bg-gray-100">
                      <div class="absolute inset-0 bg-gradient-to-tr from-gray-200/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
                      
                      <div class="w-[65%] max-w-[300px] aspect-[2/3] bg-dark rounded-r-xl rounded-l-sm shadow-[20px_30px_50px_rgba(0,0,0,0.2),-5px_0_10px_rgba(0,0,0,0.3)] flex flex-col items-center justify-center text-primary font-primary relative z-10 transform group-hover:-translate-y-4 group-hover:rotate-2 group-hover:scale-105 transition-all duration-700 ease-out border-l-8 border-gray-800">
                          <div class="absolute left-0 top-0 bottom-0 w-[2px] bg-white/20"></div>
                          <span class="text-6xl opacity-20 absolute top-10 font-bold">I</span>
                          <h3 class="text-2xl md:text-3xl font-bold text-center px-6 leading-snug">O Principal<br/>Mandamento</h3>
                      </div>
                  </div>
                  <div class="pr-6">
                      <div class="flex items-center space-x-4 mb-5">
                          <span class="text-xs font-bold uppercase tracking-widest text-primary">Teologia</span>
                          <span class="w-1 h-1 bg-gray-300 rounded-full"></span>
                          <span class="text-xs font-bold uppercase tracking-widest text-gray-400">Lançamento</span>
                      </div>
                      <h3 class="font-primary text-3xl md:text-4xl font-bold text-dark mb-5 group-hover:text-primary transition-colors">O Principal Mandamento</h3>
                      <p class="text-gray-600 text-lg mb-8 leading-relaxed">O Evangelho que o mundo não quer ouvir. Uma desconstrução do nosso orgulho diante da simplicidade do amor de Cristo.</p>
                      <a href="#" class="inline-flex items-center justify-center w-full sm:w-auto bg-white border border-gray-300 text-dark px-10 py-4 rounded-lg font-bold tracking-wide hover:bg-dark hover:text-white hover:border-dark transition-all duration-300 shadow-sm">
                          Acessar Obra (R$ 0+)
                      </a>
                  </div>
              </div>

              <div class="group relative md:mt-32">
                  <div class="w-full bg-body rounded-3xl aspect-[4/3] md:aspect-[4/5] flex items-center justify-center p-8 md:p-12 mb-10 border border-gray-100 relative overflow-hidden transition-all duration-700 group-hover:bg-gray-100">
                      <div class="absolute inset-0 bg-gradient-to-tr from-gray-200/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
                      
                      <div class="w-[65%] max-w-[300px] aspect-[2/3] bg-[#E5E7EB] rounded-r-xl rounded-l-sm shadow-[20px_30px_50px_rgba(0,0,0,0.1),-5px_0_10px_rgba(0,0,0,0.05)] flex flex-col items-center justify-center text-dark font-primary relative z-10 transform group-hover:-translate-y-4 group-hover:-rotate-2 group-hover:scale-105 transition-all duration-700 ease-out border-l-8 border-gray-300">
                          <div class="absolute left-0 top-0 bottom-0 w-[2px] bg-white/60"></div>
                          <span class="text-6xl opacity-10 absolute top-10 font-bold">II</span>
                          <h3 class="text-2xl md:text-3xl font-bold text-center px-6 leading-snug">Gestão de<br/>Pessoas</h3>
                      </div>
                  </div>
                  <div class="pr-6">
                      <div class="flex items-center space-x-4 mb-5">
                          <span class="text-xs font-bold uppercase tracking-widest text-gray-500">Alta Performance</span>
                      </div>
                      <h3 class="font-primary text-3xl md:text-4xl font-bold text-dark mb-5 group-hover:text-primary transition-colors">Gestão de Pessoas</h3>
                      <p class="text-gray-600 text-lg mb-8 leading-relaxed">Ferramentas práticas para líderes. Desvendando o potencial humano para resultados extraordinários nas organizações.</p>
                      <a href="#" class="inline-flex items-center justify-center w-full sm:w-auto bg-white border border-gray-300 text-dark px-10 py-4 rounded-lg font-bold tracking-wide hover:bg-dark hover:text-white hover:border-dark transition-all duration-300 shadow-sm">
                          Acessar Obra (R$ 0+)
                      </a>
                  </div>
              </div>

          </div>
      </div>
  </section>
</Base>
